(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/detail"],{"0061":function(t,e,n){"use strict";n.r(e);var r=n("2d27"),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},"0708":function(t,e,n){},1038:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={tuiListCell:function(){return n.e("components/thorui/tui-list-cell/tui-list-cell").then(n.bind(null,"d016"))},tuiButton:function(){return n.e("components/thorui/tui-button/tui-button").then(n.bind(null,"7133"))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,"5a91"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.modalAction.confirmCallback(!0)})},i=[]},"2d27":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("2f62");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){n.e("components/t-pay-way/ti-pay-way").then(function(){return resolve(n("d8ca"))}.bind(null,n)).catch(n.oe)},s={components:{tPayWay:u},computed:i({},(0,r.mapState)(["modalAction"])),data:function(){return{webURL:"https://www.thorui.cn/wx/static/images/mall/order/",status:1,showPayment:!1,goods:"",listData:"",orderData:"",express:"",address:"",payInfo:"",credit:0,statusTimer:!1}},onLoad:function(){this.getList()},onShow:function(){var t=this;this.$Route.query.listener&&(this.statusTimer=setInterval((function(){t.getList()}),1e3))},methods:{getList:function(){var t=this;if(!this.$Route.query.id)return this.$utils.toast("参数错误"),clearInterval(this.statusTimer),void setTimeout((function(){t.$Router.back()}),1500);this.$http.get("order.detail",{id:this.$Route.query.id}).then((function(e){t.listData=e.order,t.goods=e.goods,t.address=e.address,t.orderData=e.order,t.express=e.express,t.$Route.query.listener&&1!=e.order.status&&clearInterval(t.statusTimer)}))},takeDelivery:function(){var t=this;this.$utils.modal.confirm("确认完成收货？").then((function(e){t.$http.get("order.confirm_receipt",{orderid:t.listData.id}).then((function(e){t.$set(t.listData,"status",3)}))}))},actionPay:function(t){var e=this;if(!this.$Route.query.id)return this.$utils.toast("参数错误"),void setTimeout((function(){e.$Router.back()}),1500);this.$http.get("order.pay",{id:t}).then((function(t){e.payInfo=t,e.credit=t.credit.current,e.showPayment=!0}))},paymentClose:function(){var t=this;this.$utils.modal.confirm("确定取消支付吗？").then((function(e){t.showPayment=!1}))},payment:function(t){var e=this;switch(t.type){case"credit":this.$http.get("order.pay.complete",{id:this.payInfo.order.id,type:t.type}).then((function(t){0==t.error?(e.$utils.toast("支付成功"),e.showPayment=!1,e.downCallback(),!1!==t&&e.$Router.push({path:"/pages/order/pay/result",query:{type:"order",orderid:e.payInfo.order.id}})):e.$utils.toast("支付出错")}));break;case"wechat":this.$utils.weixinPay(this.payInfo.wechat.payinfo).then((function(t){!1!==t&&e.$utils.toast("支付成功"),e.showPayment=!1,e.downCallback(),!1!==t?e.$Router.push({path:"/pages/order/pay/result",query:{type:"order",orderid:e.payInfo.order.id}}):setTimeout((function(){e.$Router.push({path:"/pages/order/detail",query:{id:e.payInfo.order.id,listener:!0}})}),1500)})).catch((function(t){e.$utils.toast("支付失败")}));break;default:return void this.$utils.toast("请先选择支付方式")}},navTo:function(t,e){e=e||{};var n=["/pages/index/index","/pages/tabbar/integralmall","/pages/tabbar/luckybag","/pages/tabbar/cart","/pages/member/index"];n.indexOf(t)>=0?this.$Router.pushTab({path:t}):this.$Router.push({path:t,query:e})},btnPay:function(){this.show=!0},popupClose:function(){this.show=!1}}};e.default=s},"52a0":function(t,e,n){"use strict";var r=n("0708"),o=n.n(r);o.a},ca7b:function(t,e,n){"use strict";n.r(e);var r=n("1038"),o=n("0061");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("52a0");var a,u=n("f0c5"),s=Object(u["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=s.exports},f0b5:function(t,e,n){"use strict";(function(t){n("57ba");r(n("66fd"));var e=r(n("ca7b"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["f0b5","common/runtime","common/vendor"]]]);