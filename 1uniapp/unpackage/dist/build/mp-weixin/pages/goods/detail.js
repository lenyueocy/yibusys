(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/detail"],{"3a63":function(t,o,i){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(){i.e("components/thorui/tui-icon/tui-icon").then(function(){return resolve(i("5d29"))}.bind(null,i)).catch(i.oe)},e={components:{TuiIcon:n},data:function(){return{videoContext:!1,play_video:!1,height:64,top:26,scrollH:0,opcity:0,iconOpcity:.5,banner:[],bannerIndex:0,topMenu:[{icon:"home",text:"首页",size:23,badge:0},{icon:"people",text:"我的",size:26,badge:0},{icon:"cart",text:"购物车",size:23,badge:0},{icon:"share",text:"分享",size:26,badge:0}],menuShow:!1,popupShow:!1,value:1,goods:{},specGoods:{},specs:{},options:{},isChooseSpec:!1,buyOptionId:!1,buyNum:1,chooseSpecs:[],testid:0}},onLoad:function(o){var i=this,n={};n=wx.getMenuButtonBoundingClientRect(),setTimeout((function(){t.getSystemInfo({success:function(t){i.width=n.left||t.windowWidth,i.height=n.top?n.top+n.height+8:t.statusBarHeight+44,i.top=n.top?n.top+(n.height-32)/2:t.statusBarHeight+6,i.scrollH=t.windowWidth}})}),0),this.getList(),this.getPicker()},onReady:function(o){this.videoContext=t.createVideoContext("myVideo")},methods:{videoPlay:function(){this.videoContext.play(),this.play_video=!0},endPay:function(){this.videoContext.stop(),this.play_video=!1},getList:function(){var t=this;this.$Route.query.id||(this.$utils.toast("参数错误"),setTimeout((function(){t.$Router.back()}),2e3)),this.$http.get("goods.get_detail",{id:this.$Route.query.id}).then((function(o){t.goods=o.goods,t.banner=o.goods.thumbs}))},getPicker:function(){var t=this;this.$Route.query.id||(this.$utils.toast("参数错误"),setTimeout((function(){t.$Router.back()}),2e3)),this.$http.get("goods.get_picker",{id:this.$Route.query.id}).then((function(o){t.options=o.options,t.specs=o.specs,t.specGoods=o.goods}))},goBuy:function(){if(this.buyOptionId||1!=parseInt(this.goods.hasoption)||!this.popupShow){if(this.buyOptionId&&1==parseInt(this.goods.hasoption)||0==parseInt(this.goods.hasoption)&&1==this.popupShow){this.popupShow=!1;var t={goodsid:this.goods.id,total:this.buyNum};return this.buyOptionId>0&&(t.optionid=this.buyOptionId),void this.$Router.push({path:"/pages/order/submit",query:t})}this.popupShow=!0}else this.$utils.toast("请选择你要购买的规格")},addCart:function(){var t=this;if(this.buyOptionId||1!=parseInt(this.goods.hasoption)||!this.popupShow)return this.buyOptionId&&1==parseInt(this.goods.hasoption)&&1==this.popupShow||0==parseInt(this.goods.hasoption)&&1==this.popupShow?(this.popupShow=!1,void this.$http.get("member.cart.add",{id:this.goods.id,total:this.buyNum,optionid:this.buyOptionId}).then((function(o){t.$utils.toast("加入购物车成功"),t.buyNum=1}))):void(this.popupShow=!0);this.$utils.toast("请选择你要加入购物车的规格")},chooseSpec:function(t,o){var i=this;this.$set(this.chooseSpecs,t.id,o.id);var n=this.chooseSpecs.filter((function(t){return t})),e=n.join("_");this.options.map((function(t,o){t.specs==e&&(i.goods.spec_titles=t.title,i.buyOptionId=t.id,i.specGoods.marketprice=t.marketprice,i.specGoods.goodssn=t.goodssn)}))},bannerChange:function(t){this.bannerIndex=t.detail.current,console.log(t.detail.current),this.goods.video&&this.play_video&&(t.detail.current>0?this.videoContext.pause():this.videoContext.play())},previewImage:function(o){var i=o.currentTarget.dataset.index;t.previewImage({current:this.banner[i],urls:this.banner})},openMenu:function(){this.menuShow=!0},closeMenu:function(){this.menuShow=!1},showPopup:function(){this.popupShow=!0},hidePopup:function(){this.popupShow=!1},change:function(t){this.buyNum=t.value},collecting:function(){var t=this;this.$http.get("member.favorite.toggle",{id:this.goods.id,isfavorite:this.goods.isfavorite?0:1}).then((function(o){t.goods.isfavorite=!t.goods.isfavorite}))},common:function(){this.$utils.toast("分享中...")},btnTopMenu:function(t){switch(this.closeMenu(),t){case 0:this.$Router.push({name:"home_index"});break;case 1:this.$Router.push({name:"member_index"});break;case 2:this.$Router.push({name:"cart_index"});break;case 3:this.common();break}},submit:function(){this.popupShow=!1,t.navigateTo({url:"../submitOrder/submitOrder"})},coupon:function(){t.navigateTo({url:"../coupon/coupon"})},onShare:function(){}},onPageScroll:function(t){var o=t.scrollTop<=0?0:t.scrollTop,i=o/this.scrollH;this.opcity>=1&&i>=1||(this.opcity=i,this.iconOpcity=.5*(1-i<0?0:1-i))},onShareAppMessage:function(t){var o=this;return this.goods?{path:"/pages/goods/detail?id="+this.goods.id,title:"我给你分享了一个商品，快来看看吧",imageUrl:this.goods.thumb,success:function(t){o.$utils.toast("分享成功")},fail:function(){o.$utils.toast("分享失败")}}:(this.$utils.toast("参数加载中..."),!1)},onShareTimeline:function(t){var o=this;return this.goods?{title:"我给你分享了一个商品，快来看看吧",imageUrl:this.goods.thumb,success:function(t){o.$utils.toast("分享成功")},fail:function(){o.$utils.toast("分享失败")}}:(this.$utils.toast("参数加载中..."),!1)}};o.default=e}).call(this,i("543d")["default"])},"3d73":function(t,o,i){"use strict";i.r(o);var n=i("3a63"),e=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(o,t,(function(){return n[t]}))}(s);o["default"]=e.a},"507b":function(t,o,i){"use strict";(function(t){i("57ba");n(i("66fd"));var o=n(i("c89e"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,i("543d")["createPage"])},c086:function(t,o,i){"use strict";var n=i("e8cc"),e=i.n(n);e.a},c89e:function(t,o,i){"use strict";i.r(o);var n=i("d6f0"),e=i("3d73");for(var s in e)"default"!==s&&function(t){i.d(o,t,(function(){return e[t]}))}(s);i("c086");var u,r=i("f0c5"),c=Object(r["a"])(e["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);o["default"]=c.exports},d6f0:function(t,o,i){"use strict";i.d(o,"b",(function(){return e})),i.d(o,"c",(function(){return s})),i.d(o,"a",(function(){return n}));var n={tuiIcon:function(){return i.e("components/thorui/tui-icon/tui-icon").then(i.bind(null,"5d29"))},tuiTag:function(){return i.e("components/thorui/tui-tag/tui-tag").then(i.bind(null,"7caa"))},tuiListView:function(){return i.e("components/thorui/tui-list-view/tui-list-view").then(i.bind(null,"58d9"))},tuiListCell:function(){return i.e("components/thorui/tui-list-cell/tui-list-cell").then(i.bind(null,"d016"))},tuiButton:function(){return i.e("components/thorui/tui-button/tui-button").then(i.bind(null,"7133"))},tuiNomore:function(){return i.e("components/thorui/tui-nomore/tui-nomore").then(i.bind(null,"7a91"))},jyfParser:function(){return Promise.all([i.e("common/vendor"),i.e("components/jyf-parser/jyf-parser")]).then(i.bind(null,"8a41"))},tuiTopDropdown:function(){return i.e("components/thorui/tui-top-dropdown/tui-top-dropdown").then(i.bind(null,"527d"))},tuiBadge:function(){return i.e("components/thorui/tui-badge/tui-badge").then(i.bind(null,"2eca"))},tuiBottomPopup:function(){return i.e("components/thorui/tui-bottom-popup/tui-bottom-popup").then(i.bind(null,"0f10"))},tuiNumberbox:function(){return i.e("components/thorui/tui-numberbox/tui-numberbox").then(i.bind(null,"baef"))}},e=function(){var t=this,o=t.$createElement,i=(t._self._c,t.goods.productprice?parseInt(t.goods.productprice).toFixed(2):null),n=t.__map(t.specs,(function(o,i){var n=t.__get_orig(o),e=t.__map(o.items,(function(o,i){var n=t.__get_orig(o),e=t.chooseSpecs.indexOf(o.id);return{$orig:n,g1:e}}));return{$orig:n,l0:e}}));t._isMounted||(t.e0=function(o){return t.$Router.back()},t.e1=function(o){return t.$Router.push({name:"goods_comment",params:{id:t.goods.id}})},t.e2=function(o){return t.$Router.push({name:"goods_comment"})},t.e3=function(o){return t.$Router.pushTab({name:"index_index"})},t.e4=function(o){return t.$Router.push({name:"cart_index"})}),t.$mp.data=Object.assign({},{$root:{g0:i,l1:n}})},s=[]},e8cc:function(t,o,i){}},[["507b","common/runtime","common/vendor"]]]);